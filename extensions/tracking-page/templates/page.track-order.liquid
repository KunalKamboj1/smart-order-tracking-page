{% comment %}
  Smart Order Tracking Page Template
  This template creates a dedicated order tracking page
{% endcomment %}

<div class="tracking-page" data-app="smart-order-tracking">
  <div class="tracking-container">
    <div class="tracking-header">
      <h1 class="tracking-title">{{ app.metafields.tracking.page_title | default: 'Track Your Order' }}</h1>
      <p class="tracking-subtitle">Enter your order details below to get the latest tracking information</p>
    </div>

    <div class="tracking-form-wrapper">
      <form class="tracking-form" id="order-tracking-form">
        <div class="form-group">
          <label for="order-number" class="form-label">Order Number</label>
          <input 
            type="text" 
            id="order-number" 
            name="order_number" 
            class="form-input" 
            placeholder="e.g., #1001" 
            required
          >
        </div>

        <div class="form-group">
          <label for="contact-info" class="form-label">Email or Phone Number</label>
          <input 
            type="text" 
            id="contact-info" 
            name="contact_info" 
            class="form-input" 
            placeholder="email@example.com or +1234567890" 
            required
          >
        </div>

        <button type="submit" class="tracking-submit-btn" id="track-order-btn">
          <span class="btn-text">Track Order</span>
          <span class="btn-loading" style="display: none;">Searching...</span>
        </button>
      </form>
    </div>

    <!-- Results Section -->
    <div class="tracking-results" id="tracking-results" style="display: none;">
      <!-- Success State -->
      <div class="tracking-success" id="tracking-success" style="display: none;">
        <div class="tracking-info-card">
          <div class="tracking-status">
            <h3>{{ app.metafields.tracking.tracking_found_message | default: 'Your tracking information:' }}</h3>
          </div>
          
          <div class="tracking-details" id="tracking-details">
            <!-- Tracking details will be populated by JavaScript -->
          </div>
        </div>
      </div>

      <!-- Not Dispatched State -->
      <div class="tracking-not-dispatched" id="tracking-not-dispatched" style="display: none;">
        <div class="not-dispatched-card">
          <div class="not-dispatched-icon">üì¶</div>
          <h3>Order Found</h3>
          <p>{{ app.metafields.tracking.not_dispatched_message | default: 'Your order has not been dispatched yet. We will notify you once it ships.' }}</p>
          <div class="order-summary" id="order-summary">
            <!-- Order details will be populated by JavaScript -->
          </div>
        </div>
      </div>

      <!-- Error State -->
      <div class="tracking-error" id="tracking-error" style="display: none;">
        <div class="error-card">
          <div class="error-icon">‚ùå</div>
          <h3>Order Not Found</h3>
          <p>We couldn't find an order with those details. Please check your order number and email/phone number and try again.</p>
        </div>
      </div>
    </div>

    <!-- Recommended Products Section -->
    {% if app.metafields.tracking.show_recommended_products == 'true' %}
    <div class="recommended-products" id="recommended-products" style="display: none;">
      <h3>You might also like</h3>
      <div class="products-grid" id="products-grid">
        <!-- Products will be populated by JavaScript -->
      </div>
    </div>
    {% endif %}

    <!-- FAQ Section -->
    {% if app.metafields.tracking.show_faq == 'true' %}
    <div class="faq-section">
      <h3>Frequently Asked Questions</h3>
      <div class="faq-content">
        {{ app.metafields.tracking.faq_content | default: '**How long does shipping take?**<br>Shipping typically takes 3-7 business days.<br><br>**Can I change my shipping address?**<br>Please contact us immediately if you need to change your address.' }}
      </div>
    </div>
    {% endif %}
  </div>
</div>

{{ 'tracking.css' | asset_url | stylesheet_tag }}

{{ 'tracking.js' | asset_url | script_tag }}